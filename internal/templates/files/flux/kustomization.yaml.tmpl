apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: {{ .Name }}
  namespace: {{ .Namespace }}
spec:
  interval: {{ .Interval }}
  sourceRef:
    kind: GitRepository
    name: {{ .SourceName }}
  path: {{ .Path }}
  prune: {{ .Prune }}
  targetNamespace: {{ .TargetNamespace }}
{{- if .HealthChecks }}
  healthChecks:
{{- range .HealthChecks }}
    - apiVersion: {{ .APIVersion }}
      kind: {{ .Kind }}
      name: {{ .Name }}
      namespace: {{ .Namespace }}
{{- end }}
{{- end }}
{{- if .DependsOn }}
  dependsOn:
{{- range .DependsOn }}
    - name: {{ . }}
{{- end }}
{{- end }}
